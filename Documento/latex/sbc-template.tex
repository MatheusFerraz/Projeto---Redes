\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}

\usepackage[portuguese]{babel}

\usepackage[latin1]{inputenc}
     
\sloppy

\title{Aplicação P2P Mobile para Compartilhamento de Arquivos:\\Um Estudo de Caso}

\author{Matheus Herlan S. Ferraz\inst{1}, Cristóvão L. Frinhani\inst{1} }

\address{Faculdade UnB Gama - Universidade de Brasília (UnB)
  \\
  Área Especial de Indústria Projeção A, UnB - DF-480 - Gama Leste, Brasília - DF
  \email{matheusherlan}@aluno.unb.br \email{cristovao.frinhani}@gmail.com
}

\begin{document} 

\maketitle
     
\begin{resumo} 

Este artigo apresenta o relato de um estudo conduzido sobre Aplicações P2P \textit{(Peer-to-Peer)}. Neste trabalho, especificamente, o foco esteve atrelado à plataforma mobile, considerando o sistema operacional Android. Adicionalmente, utilizou-se a API \textit{Wi-Fi} P2P do Android como a principal ferramenta para elaboração da aplicação P2P resultante do estudo.
\end{resumo}

\section{Descrição do Problema}

Nos serviços cliente-servido há um grande esforço do lado do servidor, para manter o grande fluxo de dados para todos os clientes Kurose\cite{kurose_redes_2010}.

Em uma arquitetura \textit{Peer-to-Peer}, cada hospedador do arquivo é capaz de redistribuir qualquer parte do arquivo, isso faz o trafego com o servidor ser diminuido Kurose\cite{kurose_redes_2010}.

Por Schollmeier\cite{schollmeier_definition_2001}, temos que uma arquitetura \textit{Peer-to-Peer} é a troca de recursos entre máquinas interligadas por uma rede, sem a necessidade de um servidor central.

Com essas citações podemos ver que o problema é uma alta carga sobre um servidor único, e a arquitetura \textit{Peer-to-Peer} vem com uma proposta de solução, que seria a distribuicao da carga entre as máquinas ligadas nessa rede \textit{Peer-to-Peer}.


\section{Abordagem Utilizada para Resolução do Problema}

Mediante a problemática apresentada, procurou-se elaborar uma aplicação simples P2P
para dispositivos mobile portadores do sistema operacional Android. A aplicação desenvolvida
neste trabalho foi denominada \textbf{Transmissor de Arquivos}.

Como principal ferramenta de trabalho, utilizou-se a API \textit{Wi-Fi Peer-to-Peer} (P2P). Esta, por sua vez,
possibilita que dispositivos detentores do Android 4.0 (API nível 14) ou superior e 
equipados com controlador \textit{Wi-Fi}, possam se conectar diretamente
uns aos outros por meio do \textit{Wi-Fi} sem a necessidade de um ponto de acesso intermediário.

A utilização dessa API, além de permitir a descoberta e conexão com outros dispositivos que suportam
\textit{Wi-Fi} P2P, possibilita velocidades de transmissão e distâncias maiores do que o proporcionado por 
conexões Bluetooth. Estes recursos são extremamente úteis para aplicações que compartilham dados, tal 
como fotos, músicas etc.

A API \textit{Wi-Fi} P2P consiste de três partes principais. São elas:

\begin{enumerate}
  \item A classe \textit{WifiP2pManager}, que possui métodos para a descoberta, requisição e conexão com outros
  pares encontrados.
  \item Ouvintes que possibilitam a notificação de sucesso ou falha a partir de chamadas aos métodos da
  classe \textit{WifiP2pManager}.
  \item Intenções que trazem notificações de eventos específicos detectados pela estrutura \textit{Wi-Fi} P2P, tais
  como o encerramento de conexões ou então, um par recém-descoberto, por exemplo.
\end{enumerate}

A classe \textit{WifiP2pManager} provê uma série de ações. As principais são:

\begin{enumerate}
  \item \textbf{initialize()} - Registra a aplicação que está utilizando o framework \textit{Wi-Fi}. Deve ser
  chamada antes de qualquer outro método provido pela \textit{WifiP2pManager}.
  \item \textbf{connect()} - Inicia a conexão peer-to-peer entre os dispositivos.
  \item \textbf{cancelConnect()} - Cancela qualquer negociação de grupo que tenha iniciado.
  \item \textbf{requestConnectInfo()} - Requisita informações de conexão do dispositivo.
  \item \textbf{createGroup()} - Cria um grupo peer-to-peer onde o dispositivo corrente se torna o dono
  do grupo.
  \item \textbf{removeGroup()} - Remove grupo \textit{peer-to-peer}.
  \item \textbf{requestGroupInfo()} - Requisito informações acerca do grupo \textit{peer-to-peer}.
  \item \textbf{discoverPeers()} - Inicia a descoberta de pares.
  \item \textbf{requestPeers()} - Requisita uma lista dos pares descobertos.
\end{enumerate}

Por fim, outro elemento fundamental para implementação da aplicação foi a elaboração de um \textit{Broadcast Receiver}.
Este módulo possibilita que intents (intenções) transmitidas pelo sistema Android sejam recebidas e, assim, a aplicação pode responder aos eventos de interesse. No caso da aplicação \textbf{Transmissor de Arquivos}, foram
implementadas duas classes que herdam da classe \textit{BroadcastReceiver}, sendo a \textit{WiFiClientBroadcastReceiver} e a \textit{WiFiServerBroadcastReceiver}.

A aplicação \textbf{Transmissor de Arquivos} foi construída com embasamento na arquitetura nativa do Android,
onde se tem os layouts em arquivos xml e as controladoras (Activities) em arquivos java. A seguir, tem-se uma
ilustração da arquitetura e disposição dos módulos da aplicação \textbf{Transmissor de Arquivos}.

\begin{figure}[h]
\centering
\includegraphics[width=5cm]{arquitetura.png}
\caption{Arquitetura da Aplicação}
\end{figure}

\section{Dificuldades Encontradas}

Inicialmente, quando descoberta a API \textit{Wi-Fi} P2P, muitos dos seus conceitos foram difíceis de serem explorados e assimilados. A API é extremamente vasta e a aplicação construída neste trabalho utiliza os recursos mais simples da mesma. A aplicação, por exemplo, não foi implementada de forma que a troca de caracterização cliente/servidor seja feita de maneira automática. Adicionalmente, somente um arquivo é transferido por vez.

Em seu estado atual, como citado anteriormente, a aplicação desenvolvida possui algumas limitações. Na seção Trabalhos Futuros, apresenta-se algumas melhorias para a mesma.

\section{Resultados do Trabalho}

O trabalho apresenta como resultado uma aplicação, desenvolvida para android, que por meio de \textit{wifi direct} realiza a transferência de arquivos entre dois dispositivos por meio de rede \textit{Peer-to-Peer}. A seguir, tem-se uma imagem que exibe a tela inicial da aplicação \textbf{Transmissor de Arquivos}.

\begin{figure}[h]
\centering
\includegraphics[width=5cm]{aplicacao.png}
\caption{Tela inicial da Aplicação Desenvolvida}
\end{figure}

\section{Trabalhos Futuros}

Vale ressaltar que muitas melhorias podem ser efetuadas na aplicação. Contudo, as principais são:

\begin{itemize}

\item Troca do estado de servidor para cliente de forma automática.
\item Transferência de múltiplos arquivos de uma única vez.
\item Abertura do Socket TCP mesmo que seja por parte do dono do grupo.

\end{itemize}

\bibliographystyle{sbc}
\bibliography{sbc-template}

\end{document}
